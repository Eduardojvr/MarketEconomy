<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Sistema de mercados</title>
<link rel="shortcut icon" href="favicon.ico" />
<link rel="stylesheet" type="text/css"
	href="../resources/css/bootstrap_4/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css"
	href="../resources/css/bootstrap_4/modelo.css">
<link rel="stylesheet" type="text/css"
	href="../resources/fontawesome-free-5.3.1-web/css/all.css">
<link rel="stylesheet" type="text/css"
	href="../resources/css/header_generico.css">
</head>
<body>

<script src="../resources/js/vue.js"></script>
<script src="../resources/js/axios.min.js"></script>

	<!-- Header genérico -->
	<nav id="header_sistemas"
		class="navbar fixed-top navbar-light bg-light shadow-sm p-3 mb-5 align-items-start">
		<!-- logo do sistema   -->
		<div class="navbar-brand">
			<img id="logo_listemas" alt="" src="../resources/img/headerIcon.svg" />
			<h1 class="navbar-text">Sistema de Preços</h1>
		</div>
		<!-- /logo do sistema   -->
		<!-- menu do sistema   -->
		<div id="menu_sistema"
			class="navbar navbar-expand-lg navbar-light bg-light col">
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarNav" aria-controls="navbarNav"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse  nav-pills" id="navbarNav">
				<!-- 			  my-2 my-md-0 mr-md-3 -->
				<ul class="navbar-nav">
					<li class="nav-item "><a class="nav-link p-2" href="cadastroProduto.html">Cadastrar Produto</a></li>
					<li class="nav-item "><a class="nav-link p-2" href="cadastroMercado.html">Cadastrar Mercado</a></li>
					<li class="nav-item "><a class="nav-link p-2" href="listaProduto.html">Lista de Produtos</a></li>
				</ul>
			</div>
		</div>
		<!-- /menu do sistema   -->

		<!-- Menu Usuário  -->
		<ul id="menu_user" class="nav nav-pills float-right">
			<img id="busca" @click="buscar()" style="vertical-align: middle; border-style: none; height: 35px;" href="../busca.html" src="https://pt.seaicons.com/wp-content/uploads/2015/11/zoom-seach-icon.png" />
			<li class="nav-item dropdown"><a
				class="nav-link dropdown-toggle" data-toggle="dropdown" href="#"
				role="button" aria-haspopup="true" aria-expanded="false"> <i
					class="fas fa-user"></i>
			</a>
				<div id="log" class="dropdown-menu">
					<span class="dropdown-item">Usuário</span>
					<div role="separator" class="dropdown-divider"></div>
					<a @click="logout()"  class="dropdown-item" href="#three">sair <i
						class="fas fa-sign-out-alt"></i></a>
				</div>
			</li>
		</ul>
		<!-- /Menu Usuário  -->

		
		<!-- Logo Hepta  -->
		<div id="logo_hepta" class="navbar-brand">
			<img alt="" src="../resources/img/logo_hepta-sistemas.png"
				style="vertical-align: middle; border-style: none; height: 50px;">
		</div>
		<!-- /Logo Hepta  -->
		
	</nav>
	<!-- Fim Header genérico -->
	<div class="loader" id="loader-primario">
		<span></span> <span></span> <span></span> <span></span>
	</div>
	<div class="loaderFocus" id="loader-primario-focus"></div>
	<div class="container-fluid ">
		<div id="wrapper" class=" shadow-sm">
			<div class="container">
				<h2 class="display-8">Cadastro de Mercado</h2>
			</div>
			<div class="row">
				<div class="col">
					<!-- opções de campo para formulários -->
					<form id="formulario" >
						<div class="card">
							<div class="card-body">
								<div class="form-group">
									<label for="exampleFormControlInput1">Nome</label> * <input
										type="text" class="form-control" v-model="nome" id="nome"
										placeholder="Nome" required>
								</div>
								<div class="form-group">
									<label for="exampleFormControlInput1">Endereço</label> * <input
										type="text" class="form-control" v-model="endereco" id="endereco"
										placeholder="Endereço" required>
								</div>
								<div class="form-group">
									<label >Foto</label> <input
										type="text" class="form-control" value="none" v-model="foto" id="foto"
										placeholder="Url da foto">
										
								</div>
								
								<hr />
								<div class="card-body">
									<button type="button" class="btn btn-sm btn-primary" style="width:220px;height:30px;" @click="cadastrar()">Cadastrar</button>
									<button type="button" class="btn btn-link" onclick="window.location.href='../';" >Voltar</button>
									<div class="alert alert-success" role="alert" id="msgsucess" style="display:none;"></div>
									<div class="alert alert-danger" role="alert" style="display:none;" id="msg"></div>
								</div>
							</div>
						</div>
					</form>
					<!-- opções de campo para formulários -->
				</div>
			</div>
		</div>
	</div>
	<footer>
		<div class="footerSpacing"></div>
		<div class="footer" id="footer">
			<span> Criado por: Hepta Tecnologia - 1.0 </span>
		</div>
	</footer>

	<script src="../resources/js/axios.min.js"></script>
	<script src="../resources/js/vue.js"></script>
	<script src="../resources/js/header.js"></script>
	<script src="../resources/js/loader.js"></script>
	<script src="../resources/js/paginas/gpc/cargo.js"></script>
	<script src="../resources/js/footer.js"></script>
	<script src="../resources/js/jquery-3.3.1.min.js"></script>
	<script src="../resources/js/bootstrap.min.js"></script>
	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<script src="../resources/js/ie10-viewport-bug-workaround.js"></script>
	
<script>	
	let  pesquisa = new Vue({
		el: '#busca',
		methods:{
			buscar: function(produtos){
				window.location.href = "../busca.html";
			}
		}
	});

	let  control = new Vue({
		el : '#log',
		methods:{
			logout : function() {
				const vm = this;
				axios.post('../rs/user/logout').then(function(response) {
					window.location.href = "../login.html";
					sessionStorage.setItem('isLogado', false);
				});
			}
		}	
	});
	
	let vm = new Vue({
        el: '#formulario',
        methods: {			
        	cadastrar: function(){
        		const vm = this;
				let obj = {
					nome: vm.nome,
					endereco: vm.endereco,
					foto: vm.foto
				}
				if(obj.nome == null || obj.endereco == null){
					 document.getElementById("msg").style.display = 'block';
					 document.getElementById("msg").innerHTML = "Preencha todos os campos marcados com * ";
				}else{
					if(obj.foto==null){
						obj.foto="none";
					}
					axios.post('../rs/market/insert', obj).then(function(response) {
						console.log(response);
						document.getElementById("msgsucess").style.display = 'block';
						document.getElementById("msgsucess").innerHTML = "Cadastro realizado com sucesso!";
						window.location.href = "listaProduto.html";
					});
				}
			}
        }
	});
	
</script>

</body>
</html>

